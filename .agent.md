# Fantavega Project - Agent Guidelines

## Project Overview

Fantavega is a fantasy football (soccer) auction system built with Next.js 15, TypeScript, and real-time features.

## Current Development Status

- **Task 9 (UI Development)**: In Progress
  - âœ… Task 9.1: Layout and navigation components (COMPLETED)
  - âœ… Task 9.2: Auction interface components (COMPLETED)
  - âœ… Task 9.3: Player management interface (COMPLETED)
  - ðŸ”„ Task 9.4: Enhanced notifications (PENDING)

## Database Management

- Use `pnpm run db:reset` to reset database
- Use `pnpm run db:migrate` to apply schema changes
- Use `pnpm run db:seed` to populate with test data
- Database location: `database/starter_default.db`

## Key Architecture Patterns

1. **Server Components** for data fetching and authentication
2. **Client Components** for interactivity and real-time features
3. **Server Actions** for mutations and business logic
4. **Service Layer** in `src/lib/db/services/` for database operations
5. **Socket.IO** for real-time updates

## API Endpoints Structure

- `/api/user/*` - User-specific endpoints
- `/api/leagues/[league-id]/*` - League-specific endpoints
- `/api/admin/*` - Admin-only endpoints

## Authentication & Authorization

- Uses Clerk for authentication
- Role-based access: `admin` and `manager`
- User metadata stored in `user.publicMetadata.role`

## Real-time Features

- Socket.IO server runs on separate process
- WebSocket events for auction updates, bid notifications
- Client-side Socket context for real-time UI updates

## Component Organization

- `src/components/ui/` - Reusable UI components (shadcn/ui)
- `src/components/auction/` - Auction-specific components
- `src/components/players/` - Player management components
- `src/components/admin/` - Admin-only components

## Development Guidelines

- Always verify user authentication and roles
- Use TypeScript interfaces for data structures
- Implement proper error handling and loading states
- Follow responsive design patterns (mobile-first)
- Use real-time updates where appropriate

## Testing

- Test with both admin and manager roles
- Verify responsive design on different screen sizes
- Test real-time features with multiple browser tabs
- Validate API endpoints with proper authentication
